(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{3761:function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var n=i(a("1da1")),o=i(a("49bf")),r=a("6008"),s=[["camera"],["album"],["camera","album"]],c=[["compressed"],["original"],["compressed","original"]],u={data:function(){return{title:"choose/previewImage",image:"",resimage:"",base64:"",imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:0,count:[1,2,3,4,5,6,7,8,9],percent:0}},onLoad:function(){this},onUnload:function(){this.imageList=[],this.sourceTypeIndex=2,this.sourceType=["拍照","相册","拍照或相册"],this.sizeTypeIndex=2,this.sizeType=["压缩","原图","压缩或原图"],this.countIndex=0},methods:{sourceTypeChange:function(e){this.sourceTypeIndex=parseInt(e.detail.value)},sizeTypeChange:function(e){this.sizeTypeIndex=parseInt(e.detail.value)},countChange:function(e){this.countIndex=e.detail.value},chooseImage:function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this,uni.chooseImage({sourceType:s[this.sourceTypeIndex],sizeType:c[this.sizeTypeIndex],count:1,success:function(e){console.log(e.tempFilePaths),t.image=e.tempFilePaths[0],console.log("-------------------res.tempFilePaths[0]-------------"),console.log(e.tempFilePaths[0]),console.log(e.tempFilePaths[0].size),t.imageList=t.imageList.concat(e.tempFilePaths),console.log("this.image: "+t.image),console.log("-------------------arrayBufferToBase64-------------"),(0,r.pathToBase64)(t.image).then((function(e){t.base64=e})).catch((function(e){console.error(e)}))},fail:function(e){}});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clear:function(e){this.imageList=[],this.image="",this.resimage="",this.chooseImage()},previewImage:function(e){var t=e.target.dataset.src;uni.previewImage({current:t,urls:this.imageList})},test:function(){var e=this;uni.request({url:"http://localhost:8000/detect/",success:function(t){console.log("------------------res----------------------"),e.resimage="data:image/jpg;base64,"+t.data.image}})},post:function(){var e=this,t=this;this.image?(console.log("-------------------button down-------------------"),uni.showLoading({title:"识别中，请稍后",icon:"loading",mask:!0}),uni.request({url:"http://106.53.227.216:8000/receive/",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{filePath:this.base64},success:function(t){console.log("------------------res----------------------"),console.log(t),e.resimage="data:image/jpg;base64,"+t.data.image,e.imageList.unshift(e.resimage),uni.hideLoading(),uni.showToast({title:"识别成功",duration:2e3})}})):uni.showModal({title:"提示",content:"请选择一张图片！",success:function(e){e.confirm?(console.log("用户点击确定"),t.chooseImage()):e.cancel&&console.log("用户点击取消")}})},checkPermission:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var i,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e?e-1:t.sourceTypeIndex,!o.default.isIOS){a.next=7;break}return a.next=4,o.default.requestIOS(s[i][0]);case 4:a.t0=a.sent,a.next=10;break;case 7:return a.next=9,o.default.requestAndroid(0===i?"android.permission.CAMERA":"android.permission.READ_EXTERNAL_STORAGE");case 9:a.t0=a.sent;case 10:n=a.t0,null===n||1===n?n=1:uni.showModal({content:"没有开启权限",confirmText:"设置",success:function(e){e.confirm&&o.default.gotoAppSetting()}});case 12:case"end":return a.stop()}}),a)})))()}}};t.default=u},4662:function(e,t,a){"use strict";a.r(t);var i=a("7355"),n=a("6800");for(var o in n)"default"!==o&&function(e){a.d(t,e,(function(){return n[e]}))}(o);a("7aef");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"3bd4ea50",null,!1,i["a"],r);t["default"]=c.exports},6008:function(e,t,a){"use strict";function i(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}function n(e){return new Promise((function(t,a){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="blob",n.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=a,e.readAsDataURL(this.response)}},n.onerror=a,void n.send()}var o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;return s.onload=function(){o.width=s.width,o.height=s.height,r.drawImage(s,0,0),t(o.toDataURL()),o.height=o.width=0},s.onerror=a,void(s.src=e)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){a(e)}}):a(new Error("not support")):plus.io.resolveLocalFileSystemURL(i(e),(function(e){e.file((function(e){var i=new plus.io.FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){a(e)},i.readAsDataURL(e)}),(function(e){a(e)}))}),(function(e){a(e)}))}))}function o(e){return new Promise((function(t,a){if("object"===typeof window&&"document"in window){e=e.split(",");var i=e[0].match(/:(.*?);/)[1],n=atob(e[1]),o=n.length,r=new Uint8Array(o);while(o--)r[o]=n.charCodeAt(o);return t((window.URL||window.webkitURL).createObjectURL(new Blob([r],{type:i})))}var s=e.match(/data\:\S+\/(\S+);/);s?s=s[1]:a(new Error("base64 error"));var c=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+c;wx.getFileSystemManager().writeFile({filePath:u,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){t(u)},fail:function(e){a(e)}})}else a(new Error("not support"));else{var d=new plus.nativeObj.Bitmap("bitmap"+Date.now());d.loadBase64Data(e,(function(){var e="_doc/uniapp_temp/"+c;d.save(e,{},(function(){d.clear(),t(e)}),(function(e){d.clear(),a(e)}))}),(function(e){d.clear(),a(e)}))}}))}a("c975"),a("ace4"),a("d3b7"),a("ac1f"),a("3ca3"),a("466d"),a("5319"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("ddb0"),a("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=n,t.base64ToPath=o},6800:function(e,t,a){"use strict";a.r(t);var i=a("3761"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},7355:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"uni-list list-pd"},[a("v-uni-view",{staticClass:"uni-list-cell cell-pd"},[a("v-uni-view",{staticClass:"uni-uploader"},[a("v-uni-view",{staticClass:"uni-uploader-head"}),a("v-uni-view",{staticClass:"uni-uploader-body"},[a("v-uni-view",{staticClass:"uni-uploader__files"},[e.image&&!e.resimage?[a("v-uni-view",{staticClass:"uni-uploader__file"},[a("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.image,"data-src":e.image},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}})],1)]:e._e(),e.resimage?[a("v-uni-view",{staticClass:"uni-uploader__file"},[a("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.resimage,"data-src":e.resimage},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}})],1)]:e._e(),e.image||e.resimage?e._e():[a("v-uni-view",{staticClass:"uni-uploader__input-box"},[a("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}})],1)]],2)],1)],1)],1)],1),a("v-uni-view",{staticClass:"button-sp-area"},[a("v-uni-button",{staticClass:"plain",attrs:{"hover-class":"plain-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clear.apply(void 0,arguments)}}},[e._v("选择图片")]),a("v-uni-button",{staticClass:"button",attrs:{"hover-class":"button-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.post.apply(void 0,arguments)}}},[e._v("开始识别")])],1)],1)],1)},o=[]},"7aef":function(e,t,a){"use strict";var i=a("a896"),n=a.n(i);n.a},a896:function(e,t,a){var i=a("ea53");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("0d20d960",i,!0,{sourceMap:!1,shadowMode:!1})},ea53:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'.button[data-v-3bd4ea50]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#007aff;color:#fff}.plain[data-v-3bd4ea50]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#fff;border:1px solid #007aff;color:#007aff}.plain-hover[data-v-3bd4ea50]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#fff;border:1px solid #999;color:#999}.button-hover[data-v-3bd4ea50]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#999;color:#fff}.button-sp-area[data-v-3bd4ea50]{margin:20px auto 0;width:%?400?%}\n\n/* 上传 */.uni-uploader[data-v-3bd4ea50]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.uni-uploader-head[data-v-3bd4ea50]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.uni-uploader-title[data-v-3bd4ea50]{color:#5af;font-size:%?38?%;margin:%?20?%}.uni-uploader-info[data-v-3bd4ea50]{color:#b2b2b2}.uni-uploader-body[data-v-3bd4ea50]{height:%?488?%;margin:30px}.uni-uploader__files[data-v-3bd4ea50]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-wrap:wrap;flex-wrap:wrap}.uni-uploader__file[data-v-3bd4ea50]{width:%?600?%;height:%?450?%}.uni-uploader__img[data-v-3bd4ea50]{display:block;width:%?600?%;height:%?450?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.uni-uploader__input-box[data-v-3bd4ea50]{position:relative;margin:%?10?%;width:%?592?%;height:%?442?%;border:%?4?% solid #5af;-webkit-border-radius:%?10?%;border-radius:%?10?%}.uni-uploader__input-box[data-v-3bd4ea50]:before,\n.uni-uploader__input-box[data-v-3bd4ea50]:after{content:" ";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#5af}.uni-uploader__input-box[data-v-3bd4ea50]:before{width:%?4?%;height:%?79?%}.uni-uploader__input-box[data-v-3bd4ea50]:after{width:%?79?%;height:%?4?%}.uni-uploader__input-box[data-v-3bd4ea50]:active{border-color:#999}.uni-uploader__input-box[data-v-3bd4ea50]:active:before,\n.uni-uploader__input-box[data-v-3bd4ea50]:active:after{background-color:#999}.uni-uploader__input[data-v-3bd4ea50]{position:absolute;z-index:1;top:0;left:0;width:100%;height:100%;opacity:0}',""]),e.exports=t}}]);