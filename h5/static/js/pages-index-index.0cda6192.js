(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{3761:function(e,t,i){"use strict";var a=i("4ea4");i("99af"),i("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("96cf");var n=a(i("1da1")),o=a(i("49bf")),r=i("6008"),s=[["camera"],["album"],["camera","album"]],c=[["compressed"],["original"],["compressed","original"]],u={data:function(){return{title:"choose/previewImage",image:"",resimage:"",base64:"",imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:0,count:[1,2,3,4,5,6,7,8,9],percent:0}},onLoad:function(){this},onShow:function(){console.log("登陆状态: "+getApp().globalData.haslogin)},onUnload:function(){this.imageList=[],this.sourceTypeIndex=2,this.sourceType=["拍照","相册","拍照或相册"],this.sizeTypeIndex=2,this.sizeType=["压缩","原图","压缩或原图"],this.countIndex=0},methods:{sourceTypeChange:function(e){this.sourceTypeIndex=parseInt(e.detail.value)},sizeTypeChange:function(e){this.sizeTypeIndex=parseInt(e.detail.value)},countChange:function(e){this.countIndex=e.detail.value},chooseImage:function(){var e=(0,n.default)(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this,uni.chooseImage({sourceType:s[this.sourceTypeIndex],sizeType:c[this.sizeTypeIndex],count:1,success:function(e){console.log(e.tempFilePaths),t.image=e.tempFilePaths[0],console.log("-------------------res.tempFilePaths[0]-------------"),console.log(e.tempFilePaths[0]),console.log(e.tempFilePaths[0].size),t.imageList=t.imageList.concat(e.tempFilePaths),console.log("this.image: "+t.image),console.log("-------------------arrayBufferToBase64-------------"),(0,r.pathToBase64)(t.image).then((function(e){t.base64=e})).catch((function(e){console.error(e)}))},fail:function(e){}});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),clear:function(e){this.imageList=[],this.image="",this.resimage="",this.chooseImage()},previewImage:function(e){var t=e.target.dataset.src;uni.previewImage({current:t,urls:this.imageList})},test:function(){var e=this;uni.request({url:"http://localhost:8000/receive/",success:function(t){console.log("------------------res----------------------"),e.resimage="data:image/jpg;base64,"+t.data.image}})},post:function(){var e=this,t=this;this.image?(console.log("-------------------button down-------------------"),uni.showLoading({title:"识别中，请稍后",icon:"loading",mask:!0}),uni.request({url:"http://www.oucsrdpwechat.com:8000/receive/",method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:{filePath:this.base64,userid:getApp().globalData.userid},success:function(t){console.log("------------------res----------------------"),console.log(t),e.resimage="data:image/jpg;base64,"+t.data.image,e.imageList.unshift(e.resimage),uni.hideLoading(),uni.showToast({title:"识别成功",duration:1e3})}})):uni.showModal({title:"提示",content:"请选择一张图片！",success:function(e){e.confirm?(console.log("用户点击确定"),t.chooseImage()):e.cancel&&console.log("用户点击取消")}})},checkPermission:function(e){var t=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(a=e?e-1:t.sourceTypeIndex,!o.default.isIOS){i.next=7;break}return i.next=4,o.default.requestIOS(s[a][0]);case 4:i.t0=i.sent,i.next=10;break;case 7:return i.next=9,o.default.requestAndroid(0===a?"android.permission.CAMERA":"android.permission.READ_EXTERNAL_STORAGE");case 9:i.t0=i.sent;case 10:n=i.t0,null===n||1===n?n=1:uni.showModal({content:"没有开启权限",confirmText:"设置",success:function(e){e.confirm&&o.default.gotoAppSetting()}});case 12:case"end":return i.stop()}}),i)})))()}}};t.default=u},4662:function(e,t,i){"use strict";i.r(t);var a=i("e507"),n=i("6800");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);i("8e84");var r,s=i("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"c86099b0",null,!1,a["a"],r);t["default"]=c.exports},6008:function(e,t,i){"use strict";function a(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}function n(e){return new Promise((function(t,i){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var n=new XMLHttpRequest;return n.open("GET",e,!0),n.responseType="blob",n.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=i,e.readAsDataURL(this.response)}},n.onerror=i,void n.send()}var o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;return s.onload=function(){o.width=s.width,o.height=s.height,r.drawImage(s,0,0),t(o.toDataURL()),o.height=o.width=0},s.onerror=i,void(s.src=e)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){i(e)}}):i(new Error("not support")):plus.io.resolveLocalFileSystemURL(a(e),(function(e){e.file((function(e){var a=new plus.io.FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(e){i(e)},a.readAsDataURL(e)}),(function(e){i(e)}))}),(function(e){i(e)}))}))}function o(e){return new Promise((function(t,i){if("object"===typeof window&&"document"in window){e=e.split(",");var a=e[0].match(/:(.*?);/)[1],n=atob(e[1]),o=n.length,r=new Uint8Array(o);while(o--)r[o]=n.charCodeAt(o);return t((window.URL||window.webkitURL).createObjectURL(new Blob([r],{type:a})))}var s=e.match(/data\:\S+\/(\S+);/);s?s=s[1]:i(new Error("base64 error"));var c=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+c;wx.getFileSystemManager().writeFile({filePath:u,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){t(u)},fail:function(e){i(e)}})}else i(new Error("not support"));else{var l=new plus.nativeObj.Bitmap("bitmap"+Date.now());l.loadBase64Data(e,(function(){var e="_doc/uniapp_temp/"+c;l.save(e,{},(function(){l.clear(),t(e)}),(function(e){l.clear(),i(e)}))}),(function(e){l.clear(),i(e)}))}}))}i("c975"),i("ace4"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("5319"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=n,t.base64ToPath=o},6800:function(e,t,i){"use strict";i.r(t);var a=i("3761"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"8e77":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@media only screen and (min-width:769px){.uni-uploader-body[data-v-c86099b0]{height:%?700?%!important}.button-sp-area[data-v-c86099b0]{margin:15px auto 20px!important}.uni-uploader-title[data-v-c86099b0]{font-size:38px!important;letter-spacing:5px!important}.uni-uploader__file[data-v-c86099b0]{width:%?736?%!important;height:%?550?%!important}.uni-uploader__img[data-v-c86099b0]{display:block;width:%?736?%!important;height:%?550?%!important;margin-top:10px!important;-webkit-border-radius:%?10?%;border-radius:%?10?%}.uni-uploader__input-box[data-v-c86099b0]{position:relative;margin:%?10?%;width:%?728?%!important;height:%?542?%!important;border:%?4?% solid #10aeb5;-webkit-border-radius:%?10?%;border-radius:%?10?%;margin-top:10px!important}}.button[data-v-c86099b0]{background-color:#10aeb5;color:#fff}.plain[data-v-c86099b0]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#fff;border:1px solid #10aeb5;color:#10aeb5}.plain-hover[data-v-c86099b0]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#fff;border:1px solid #999;color:#999}.button-hover[data-v-c86099b0]{margin-top:%?30?%;margin-bottom:%?30?%;background-color:#999;color:#fff}.button-sp-area[data-v-c86099b0]{margin:10px auto 20px;width:%?400?%}\n\n/* 上传 */.uni-uploader[data-v-c86099b0]{-webkit-box-flex:1;-webkit-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;background-color:#10aeb5}.uni-uploader-head[data-v-c86099b0]{max-width:768px;height:120px;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.uni-uploader-title[data-v-c86099b0]{color:#fff;line-height:120px;font-size:28px;font-weight:700;letter-spacing:2px}.uni-uploader-info[data-v-c86099b0]{color:#b2b2b2}.uni-uploader-body[data-v-c86099b0]{background-color:#fff;padding:25px;-webkit-border-radius:.625rem .625rem 0 0;border-radius:.625rem .625rem 0 0;margin-top:0!important}.uni-uploader__files[data-v-c86099b0]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-flex-wrap:wrap;flex-wrap:wrap}.uni-uploader__file[data-v-c86099b0]{width:%?600?%;height:%?450?%}.uni-uploader__img[data-v-c86099b0]{display:block;width:%?600?%;height:%?450?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.uni-uploader__input-box[data-v-c86099b0]{position:relative;margin:%?10?%;width:%?592?%;height:%?442?%;border:%?4?% solid #10aeb5;-webkit-border-radius:%?10?%;border-radius:%?10?%}.uni-uploader__input-box[data-v-c86099b0]:before,\n.uni-uploader__input-box[data-v-c86099b0]:after{content:" ";position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#10aeb5}.uni-uploader__input-box[data-v-c86099b0]:before{width:%?4?%;height:%?79?%}.uni-uploader__input-box[data-v-c86099b0]:after{width:%?79?%;height:%?4?%}.uni-uploader__input-box[data-v-c86099b0]:active{border-color:#999}.uni-uploader__input-box[data-v-c86099b0]:active:before,\n.uni-uploader__input-box[data-v-c86099b0]:active:after{background-color:#999}.uni-uploader__input[data-v-c86099b0]{position:absolute;z-index:1;top:0;left:0;width:100%;height:100%;opacity:0}',""]),e.exports=t},"8e84":function(e,t,i){"use strict";var a=i("b6fc"),n=i.n(a);n.a},b6fc:function(e,t,i){var a=i("8e77");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("524e6697",a,!0,{sourceMap:!1,shadowMode:!1})},e507:function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"container"},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"uni-list list-pd"},[i("v-uni-view",{staticClass:"uni-list-cell cell-pd"},[i("v-uni-view",{staticClass:"uni-uploader"},[i("v-uni-view",{staticClass:"uni-uploader-head"},[i("v-uni-view",{staticClass:"uni-uploader-title"},[e._v("口罩佩戴图片检测平台")])],1),i("v-uni-view",{staticClass:"uni-uploader-body"},[i("v-uni-view",{staticClass:"uni-uploader__files"},[e.image&&!e.resimage?[i("v-uni-view",{staticClass:"uni-uploader__file"},[i("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.image,"data-src":e.image},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}})],1)]:e._e(),e.resimage?[i("v-uni-view",{staticClass:"uni-uploader__file"},[i("v-uni-image",{staticClass:"uni-uploader__img",attrs:{src:e.resimage,"data-src":e.resimage},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.previewImage.apply(void 0,arguments)}}})],1)]:e._e(),e.image||e.resimage?e._e():[i("v-uni-view",{staticClass:"uni-uploader__input-box"},[i("v-uni-view",{staticClass:"uni-uploader__input",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseImage.apply(void 0,arguments)}}})],1)]],2)],1)],1)],1)],1),i("v-uni-view",{staticClass:"button-sp-area"},[i("v-uni-button",{staticClass:"plain",attrs:{"hover-class":"plain-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clear.apply(void 0,arguments)}}},[e._v("选择图片")]),i("v-uni-button",{staticClass:"button",attrs:{"hover-class":"button-hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.post.apply(void 0,arguments)}}},[e._v("开始识别")])],1)],1)],1)},o=[]}}]);